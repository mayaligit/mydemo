<?xml version = "1.0" encoding = "UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD com.example.Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace = "com.cmic.attendance.dao.AttendanceDao">
    <sql id="attendanceColumns">
        a.attendance_id AS "attendanceId",
        a.attendance_user AS "attendanceUser",
        a.start_time AS "startTime",
        a.end_time AS "endTime",
        a.attendance_status AS "attendanceStatus",
        a.attendance_desc AS "attendanceDesc",
        a.attendance_month AS "attendanceMonth",
        a.start_location AS "startLocation",
        a.end_location AS "endLocation",
        a.start_signal AS "startSignal",
        a.end_signal AS "endSignal",
        a.daily_status AS "dailyStatus",
        a.attendance_group AS "attendanceGroup",
        a.end_time_status AS "endTimeStatus",
        a.start_time_status AS "startTimeStatus",
        a.is_attendance_end AS "isAttendanceEnd",
        a.is_attendance_start AS "isAttendanceStart",
        a.create_by AS "createBy.id",
        a.create_time AS "createTime",
        a.update_by AS "updateBy.id",
        a.update_time AS "updateTime"
    </sql>

    <sql id="attendanceJoins">
    </sql>

    <select id="get" resultType="Attendance">
        SELECT
        <include refid="attendanceColumns"/>
        FROM t_attendance a
        <include refid="attendanceJoins"/>
        WHERE a.id = #{id}
    </select>

    <select id="findList" resultType="Attendance">
        SELECT
        <include refid="attendanceColumns"/>
        FROM t_attendance a
        <include refid="attendanceJoins"/>
        <where>
            1 = 1
        </where>
    </select>

    <select id="findAllList" resultType="Attendance">
        SELECT
        <include refid="attendanceColumns"/>
        FROM t_attendance a
        <include refid="attendanceJoins"/>
    </select>

    <insert id="insert">
        INSERT INTO t_attendance(
            attendance_id,
            attendance_user,
            start_time,
            end_time,
            attendance_status,
            attendance_desc,
            attendance_month,
            start_location,
            end_location,
            start_signal,
            end_signal,
            daily_status,
            attendance_group,
            end_time_status,
            start_time_status,
            is_attendance_end,
            is_attendance_start,
            create_by,
            create_time,
            update_by,
            update_time
        ) VALUES (
            #{attendanceId},
            #{attendanceUser},
            #{startTime},
            #{endTime},
            #{attendanceStatus},
            #{attendanceDesc},
            #{attendanceMonth},
            #{startLocation},
            #{endLocation},
            #{startSignal},
            #{endSignal},
            #{dailyStatus},
            #{attendanceGroup},
            #{endTimeStatus},
            #{startTimeStatus},
            #{isAttendanceEnd},
            #{isAttendanceStart},
            #{createBy.id},
            #{createTime},
            #{updateBy.id},
            #{updateTime}
        )
    </insert>

    <update id="update">
        UPDATE t_attendance SET
        update_by = #{updateBy.id}
        WHERE id = #{id}
    </update>

    <update id="dynamicUpdate">
        UPDATE t_attendance SET
        <if test="attendanceId != null and attendanceId != ''">
        attendance_id = #{attendanceId},
        </if>
        <if test="attendanceUser != null and attendanceUser != ''">
        attendance_user = #{attendanceUser},
        </if>
        <if test="startTime != null and startTime != ''">
        start_time = #{startTime},
        </if>
        <if test="endTime != null and endTime != ''">
        end_time = #{endTime},
        </if>
        <if test="attendanceStatus != null and attendanceStatus != ''">
        attendance_status = #{attendanceStatus},
        </if>
        <if test="attendanceDesc != null and attendanceDesc != ''">
        attendance_desc = #{attendanceDesc},
        </if>
        <if test="attendanceMonth != null and attendanceMonth != ''">
        attendance_month = #{attendanceMonth},
        </if>
        <if test="startLocation != null and startLocation != ''">
        start_location = #{startLocation},
        </if>
        <if test="endLocation != null and endLocation != ''">
        end_location = #{endLocation},
        </if>
        <if test="startSignal != null and startSignal != ''">
        start_signal = #{startSignal},
        </if>
        <if test="endSignal != null and endSignal != ''">
        end_signal = #{endSignal},
        </if>
        <if test="dailyStatus != null and dailyStatus != ''">
        daily_status = #{dailyStatus},
        </if>
        <if test="attendanceGroup != null and attendanceGroup != ''">
        attendance_group = #{attendanceGroup},
        </if>
        <if test="endTimeStatus != null and endTimeStatus != ''">
        end_time_status = #{endTimeStatus},
        </if>
        <if test="startTimeStatus != null and startTimeStatus != ''">
        start_time_status = #{startTimeStatus},
        </if>
        <if test="isAttendanceEnd != null and isAttendanceEnd != ''">
        is_attendance_end = #{isAttendanceEnd},
        </if>
        <if test="isAttendanceStart != null and isAttendanceStart != ''">
        is_attendance_start = #{isAttendanceStart},
        </if>
        <if test="createTime != null and createTime != ''">
        create_time = #{createTime},
        </if>
        <if test="updateTime != null and updateTime != ''">
        update_time = #{updateTime},
        </if>
        update_by = #{updateBy.id},
        update_date = #{updateDate}
        WHERE id = #{id}
    </update>

    <delete id="delete">
        DELETE FROM t_attendance
        WHERE id = #{id}
    </delete>


</mapper>